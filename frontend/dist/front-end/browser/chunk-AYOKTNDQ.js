import{a as f}from"./chunk-JRB3M7FQ.js";import{a as v,b as T}from"./chunk-FU2RVMGM.js";import{z as k}from"./chunk-JS2QCX3E.js";import{Cb as D,Ma as l,Na as d,Vb as h,Xa as p,nb as r,tb as c,ub as m,vb as u}from"./chunk-VXWA6INE.js";var y=()=>[],b=class o{constructor(e){this.taskService=e}title="Reports";allTasks=[];displayedTasks=[];tableColumns=[{key:"id",label:"ID"},{key:"title",label:"Title"},{key:"assignedEmployeeName",label:"Assigned To"},{key:"status",label:"Status"},{key:"deadline",label:"Deadline"},{key:"createdAt",label:"Created"},{key:"updatedAt",label:"Updated"}];selectedReport="overdue";startDate="";endDate="";noDataModalVisible=!1;noDataMessage="";ngOnInit(){this.taskService.getTasks().subscribe({next:e=>{this.allTasks=e},error:e=>{console.error("Error fetching tasks",e)}})}onReportGenerated(e){this.selectedReport=e.type,this.startDate=e.startDate||"",this.endDate=e.endDate||"",this.selectedReport==="overdue"?this.showOverdueTasks():this.showActivityTasks(this.startDate,this.endDate),this.checkForNoData()}showOverdueTasks(){let e=new Date;this.displayedTasks=this.allTasks.filter(t=>new Date(t.deadline)<e&&t.status!=="COMPLETED")}showActivityTasks(e,t){if(!e&&!t){this.displayedTasks=[...this.allTasks];return}let s=e?new Date(e):new Date(0),a=t?new Date(t):new Date;this.displayedTasks=this.allTasks.filter(i=>{let n=new Date(i.createdAt);return n>=s&&n<=a})}checkForNoData(){this.displayedTasks.length===0&&(this.selectedReport==="overdue"?this.noDataMessage="No overdue tasks found":this.noDataMessage="No tasks found for the selected date range",this.noDataModalVisible=!0)}closeNoDataModal(){this.noDataModalVisible=!1}static \u0275fac=function(t){return new(t||o)(d(f))};static \u0275cmp=p({type:o,selectors:[["app-reports"]],decls:2,vars:10,consts:[[3,"reportGenerated","title","metrics","metricsEnabled","searchEnabled","newActionBtnEnabled","reportSelection"],[3,"columns","data","emptyMessage"]],template:function(t,s){t&1&&(c(0,"app-sub-header",0),D("reportGenerated",function(i){return s.onReportGenerated(i)}),m(),u(1,"app-table",1)),t&2&&(r("title",s.title)("metrics",h(9,y))("metricsEnabled",!1)("searchEnabled",!1)("newActionBtnEnabled",!1)("reportSelection",!0),l(),r("columns",s.tableColumns)("data",s.displayedTasks)("emptyMessage",s.noDataMessage))},dependencies:[k,T,v],encapsulation:2})};export{b as ReportsComponent};
